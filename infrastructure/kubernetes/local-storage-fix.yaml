# Quick fix for local Kubernetes clusters (Docker Desktop, minikube, kind)
# This creates PersistentVolumes using hostPath for local testing

---
# PV for Models
apiVersion: v1
kind: PersistentVolume
metadata:
  name: models-pv
  labels:
    type: local
spec:
  storageClassName: manual
  capacity:
    storage: 5Gi
  accessModes:
    - ReadWriteMany
  hostPath:
    path: "/tmp/cancer-mlops/models"
    type: DirectoryOrCreate

---
# PV for Data
apiVersion: v1
kind: PersistentVolume
metadata:
  name: data-pv
  labels:
    type: local
spec:
  storageClassName: manual
  capacity:
    storage: 10Gi
  accessModes:
    - ReadWriteMany
  hostPath:
    path: "/tmp/cancer-mlops/data"
    type: DirectoryOrCreate

---
# PV for Logs
apiVersion: v1
kind: PersistentVolume
metadata:
  name: logs-pv
  labels:
    type: local
spec:
  storageClassName: manual
  capacity:
    storage: 5Gi
  accessModes:
    - ReadWriteMany
  hostPath:
    path: "/tmp/cancer-mlops/logs"
    type: DirectoryOrCreate

---
# PV for MLflow Artifacts
apiVersion: v1
kind: PersistentVolume
metadata:
  name: mlflow-artifacts-pv
  labels:
    type: local
spec:
  storageClassName: manual
  capacity:
    storage: 20Gi
  accessModes:
    - ReadWriteOnce
  hostPath:
    path: "/tmp/cancer-mlops/mlflow-artifacts"
    type: DirectoryOrCreate

---
# PV for MLflow Backend
apiVersion: v1
kind: PersistentVolume
metadata:
  name: mlflow-backend-pv
  labels:
    type: local
spec:
  storageClassName: manual
  capacity:
    storage: 5Gi
  accessModes:
    - ReadWriteOnce
  hostPath:
    path: "/tmp/cancer-mlops/mlflow-backend"
    type: DirectoryOrCreate

---
# PV for Prometheus Data
apiVersion: v1
kind: PersistentVolume
metadata:
  name: prometheus-data-pv
  labels:
    type: local
spec:
  storageClassName: manual
  capacity:
    storage: 10Gi
  accessModes:
    - ReadWriteOnce
  hostPath:
    path: "/tmp/cancer-mlops/prometheus"
    type: DirectoryOrCreate

---
# PV for Grafana Data
apiVersion: v1
kind: PersistentVolume
metadata:
  name: grafana-data-pv
  labels:
    type: local
spec:
  storageClassName: manual
  capacity:
    storage: 2Gi
  accessModes:
    - ReadWriteOnce
  hostPath:
    path: "/tmp/cancer-mlops/grafana"
    type: DirectoryOrCreate

---
# Updated PVC for Models (with manual storage class)
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: models-pvc
  namespace: cancer-mlops
spec:
  storageClassName: manual
  accessModes:
    - ReadWriteMany
  resources:
    requests:
      storage: 5Gi

---
# Updated PVC for Data
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: data-pvc
  namespace: cancer-mlops
spec:
  storageClassName: manual
  accessModes:
    - ReadWriteMany
  resources:
    requests:
      storage: 10Gi

---
# Updated PVC for Logs
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: logs-pvc
  namespace: cancer-mlops
spec:
  storageClassName: manual
  accessModes:
    - ReadWriteMany
  resources:
    requests:
      storage: 5Gi

---
# Updated PVC for MLflow Artifacts
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: mlflow-artifacts-pvc
  namespace: cancer-mlops
spec:
  storageClassName: manual
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 20Gi

---
# Updated PVC for MLflow Backend
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: mlflow-backend-pvc
  namespace: cancer-mlops
spec:
  storageClassName: manual
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 5Gi

---
# Updated PVC for Prometheus Data
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: prometheus-data-pvc
  namespace: cancer-mlops
spec:
  storageClassName: manual
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 10Gi

---
# Updated PVC for Grafana Data
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: grafana-data-pvc
  namespace: cancer-mlops
spec:
  storageClassName: manual
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 2Gi
